package $package;

import javax.microedition.lcdui.Command;
import javax.microedition.lcdui.CommandListener;
import javax.microedition.lcdui.Display;
import javax.microedition.lcdui.Displayable;
import javax.microedition.lcdui.TextBox;
import javax.microedition.midlet.MIDlet;
import javax.microedition.midlet.MIDletStateChangeException;

public class $class extends MIDlet implements CommandListener {
	
	private TextBox textBox;
	private Command exitCommand;
	private Command startClient;

	public $class()  {
		textBox = new TextBox("","Welcome To Limbo Client",1000,0);
		startClient = new Command("StartClient", Command.SCREEN,1);
		exitCommand = new Command("Exit", Command.EXIT,1);
		textBox.addCommand(startClient);
		textBox.addCommand(exitCommand);
		textBox.setCommandListener(this);
	}

	
	private static void runClient(){
		/*Please insert your client calls here by default the client tries to connect to 127.0.0.1:9002 
		 as you can see in the client stub constructor parameters*/
		String defaultURL = "http://127.0.0.1:9002/";
		$LimboPortImpl theClient = new $LimboPortImpl(new ${protocol}(), defaultURL); 
	}

	protected void destroyApp(boolean arg0) throws MIDletStateChangeException { }

	protected void pauseApp() { }

	protected void startApp() throws MIDletStateChangeException {
		Display.getDisplay(this).setCurrent(textBox);
	}

	public void commandAction(Command cmd, Displayable d) {
		if (cmd==exitCommand){
			try{
				destroyApp(false);
			} catch (Exception e) {}
			notifyDestroyed();
			}
			if (cmd==startClient){
				new Thread(new Runnable() {
					public void run() {
						${class}.runClient();
					}
					
				}).start();
			}
		}
}
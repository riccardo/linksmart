package $package;

$importTypes

/**
 * $class is generated by Limbo
 *
 * 
 */
public class $class {

#if($methodsFilledIn == true)

	private ${webServiceName}Device device;
	private ${portName}UPnPService upnpService;
#foreach($OperationType in $operations)
	${OperationType.getOpName()}Action ${OperationType.getOpName().toLowerCase()};
#end
#end
	public $class(){
#if($methodsFilledIn == true)
		this.device = ${webServiceName}Activator.getDevice();
		this.upnpService = (${portName}UPnPService)this.device.getService("urn:upnp-org:serviceId:${portName}");		
#foreach($OperationType in $operations)
		this.${OperationType.getOpName().toLowerCase()} = (${OperationType.getOpName()}Action)this.upnpService.getAction("${OperationType.getOpName()}");
#end
#if($portName == "LinkSmartServicePort")
		//((WSEndpointStateVariable)this.getwsendpoint.getStateVariable("wsendpoint")).set(${webServiceName}Servlet.getEndpoint());
		//((LinkSmartWSEndpointStateVariable)this.getlinksmartwsendpoint.getStateVariable("linksmartwsendpoint")).set(LinkSmartServicePortServlet.getEndpoint());
		((DiscoveryInfoStateVariable)this.getdiscoveryinfo.getStateVariable("discoveryinfo")).set("Limbo generated WS code");
		((HasErrorStateVariable)this.gethaserror.getStateVariable("haserror")).set(false);
		InputStream is = LinkSmartServicePortOpsImpl.class.getResourceAsStream("/resources/${webServiceName}.wsdl");
		BufferedReader reader = new BufferedReader(new InputStreamReader(is));
	        StringBuilder sb = new StringBuilder();
		String line;
		try {
			while ((line = reader.readLine()) != null) {
				sb.append(line + "\n");
		    }
		} catch (IOException e) {
		   e.printStackTrace();
		}           
		try {
			is.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
		String wsdl = sb.toString();
		((wsdlStateVariable)this.getwsdl.getStateVariable("wsdl")).set(wsdl);
#end

#end
	}

$methods

}
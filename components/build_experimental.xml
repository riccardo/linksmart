<!--
  Copyright (C) 2006-2010 Fraunhofer FIT, Christian Prause
                          the HYDRA consortium, EU project IST-2005-034891
  
  This file is part of LinkSmart.
  
  LinkSmart is free software: you can redistribute it and/or modify
  it under the terms of the GNU LESSER GENERAL PUBLIC LICENSE
  version 3 as published by the Free Software Foundation.
  
  LinkSmart is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Lesser General Public License for more details.
  
  You should have received a copy of the GNU Lesser General Public
  License along with LinkSmart.  If not, see <http://www.gnu.org/licenses/>.
-->
<!--
  This file compiles all the Hydra components.
-->
<project name="hydra.components" default="fail" 
		xmlns:ivy="antlib:org.apache.ivy.ant">

 <macrodef name="forall">
  <attribute name="target"/>
  <sequential>
   <subant target="@{target}">
    <fileset dir="." includes="*/build.xml"/>
   </subant>
  </sequential>
 </macrodef>
 
 <target name="fail">
  <fail message="please use the ant build file in the parent directory"/>
 </target>
 
 <target name="make-all" depends="make-java,make-dotnet" 
 		description="make Java and .NET" />
 
 <target name="make-java">
  <ant dir="Log4j" target="make"/>
  <ant dir="LinkSmartMiddlewareAPI" target="make"/>
  <ant dir="CryptoManager" target="make"/>
  <!-- <ant dir="TrustManager" target="make"/> -->  
  <ant dir="LinkSmartWSProvider" target="make"/>
  <ant dir="LinkSmartMiddlewareClients" target="make"/>
  <ant dir="LinkSmartManagerConfigurator" target="make"/>
  <ant dir="NetworkManager" target="make"/>
 </target>
 
 <target name="make-dotnet">
 	<ant dir="DotNetCoreMiddleware" target="make"/>
 </target>
 
 <target name="test-all" depends="test-java,test-dotnet">
 </target>
 
 <target name="test-java" depends="make-java">
  <ant dir="AntBuildTemplate" target="test"/>
  <ant dir="Log4j" target="test"/>
  <ant dir="LinkSmartMiddlewareAPI" target="test"/>
  <ant dir="CryptoManager" target="test"/>
  <ant dir="TrustManager" target="test"/>  
  <ant dir="LinkSmartWSProvider" target="test"/>
  <ant dir="LinkSmartMiddlewareClients" target="test"/>
  <ant dir="LinkSmartManagerConfigurator" target="test"/>
  <ant dir="NetworkManager" target="test"/>
  <ant dir="EventManager" target="test"/>
  <ant dir="OntologyManager" target="test" />
  <ant dir="PolicyFramework" target="test"/>
  <ant dir="ContextManager" target="test" />
  <ant dir="DataAcquisitionComponent" target="test" /> 
  <ant dir="QoSManager" target="test"/>
  <ant dir="SelfStarManager" target="test"/>
  <ant dir="StorageArchitecture" target="test"/>
 </target>
 
 <target name="test-dotnet" depends="make-dotnet">
 </target>
 
 <target name="printenv">
  <echo message="Build directory:  ${build.dir}"/>
  <echo message="Distribution dir: ${distribution.dir}"/>
 </target>
</project>
